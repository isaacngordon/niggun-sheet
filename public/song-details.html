<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Song Details</title>
    <link rel="stylesheet" href="css/main.css">
    
    <style>
        /* Add your custom styles here */
        body {
            background-color: white; /* White background */
            color: black; /* Black text color */
            text-align: center; /* Center align content */
        }

        #song-details {
            max-width: 600px; /* Limit width to 600px */
            width: 80%;
            margin: 6rem auto; /* Center horizontally */
        }
    </style>
</head>

<body>
    <div id="navbar">
        <a href="/">Home Page</a>
        <a href="/songs.html">Song Directory</a>
    </div>

    <div id="song-details">
        <h2>Song Details</h2>
        <div id="details-container">
            <p><strong>Title:</strong> <span id="song-title">Loading...</span></p>
            <p><strong>Artist:</strong> <span id="song-artist">Loading...</span></p>
            <p><strong>Lyrics:</strong></p>
            <p id="song-lyrics">Loading...</p>
            <p><strong>Google Drive:</strong> <a id="google-drive-link" href="#" target="_blank">Link</a></p>
            <p><strong>YouTube:</strong> <a id="youtube-link" href="#" target="_blank">Link</a></p>
            <p><strong>Spotify:</strong> <a id="spotify-link" href="#" target="_blank">Link</a></p>
        </div>
    </div>

    <div id="footer">
        <a href="https://drive.google.com/file/d/1X_aY7tb7E9RxKVyXDYkGAC_wMGznGJe6/view?usp=drive_link" target="_blank">Download Niggun Sheet</a>
        <a href="https://drive.google.com/file/d/1GrpBue_ukxtR7mKjuGZljXL_X-I7Y4wu/view?usp=drive_link" target="_blank">Download Simcha Sheet</a>
    </div>

    <script>
        // Function to get URL parameters
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

        // Function to strip HTML tags from text
        function stripHtmlTags(html) {
            let doc = new DOMParser().parseFromString(html, 'text/html');
            return doc.body.textContent || "";
        }

        // Get song details from URL parameters
        const title = getParameterByName('title');
        const artist = getParameterByName('artist');
        const lyrics = getParameterByName('lyrics');
        const drive = getParameterByName('drive');
        const youtube = getParameterByName('youtube');
        const spotify = getParameterByName('spotify');

        // Populate song details
        document.getElementById("song-title").innerText = title;
        document.getElementById("song-artist").innerText = artist;
        document.getElementById("song-lyrics").innerText = stripHtmlTags(lyrics);
        document.getElementById("google-drive-link").href = drive;
        document.getElementById("youtube-link").href = youtube;
        document.getElementById("spotify-link").href = spotify;
    </script>
</body>

</html>
